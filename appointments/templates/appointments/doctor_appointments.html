{% extends 'appointments/base.html' %}
{% load static %}

{% block title %}Client Appointments{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock %}

{% block content %}
<!-- ============ DASHBOARD WRAPPER ============ -->
<div class="dashboard-wrapper"
     style="
        width: 80%; /* Reduced width for smaller layout */
        background-color: #1c1f2a;
        padding: 20px;
        box-sizing: border-box;
        margin: 0 auto; /* Center the content */
        color: #fff;
        border: 1px solid #efd959;  /* Gold accent border */
     "
>
    <!-- TOP BAR / COUNTERS -->
    <div class="tabs-header"
    style="
       display: flex;
       gap: 20px;
       margin-bottom: 20px;
       align-items: center;
    "
>

   <!-- Two Buttons -->
   <div style="display: flex; gap: 10px;">
       <button type="button" 
               id="inClinicBtn"
               onclick="switchToInClinic()" 
               style="
                 background-color: #1c1f2a;
                 color: #fff;
                 padding: 8px 16px;
                 border: 1px solid #efd959;
                 border-radius: 5px;
                 cursor: pointer;
                 width: 100px;
                 height: 50px;
                 transition: background-color 0.3s ease, transform 0.2s ease;
               "
               onmouseover="this.style.backgroundColor='#2c2c3c'; this.style.transform='scale(1.05)'"
               onmouseout="this.style.backgroundColor='#1c1f2a'; this.style.transform='scale(1)'"
       >
         In Clinic
       </button>
       <button type="button" 
               id="onlineBtn"
               onclick="switchToOnline()" 
               style="
                 background-color: #1c1f2a;
                 color: #fff;
                 padding: 8px 16px;
                 border: 1px solid #efd959;
                 border-radius: 5px;
                 cursor: pointer;
                 width: 100px;
                 height: 50px;
                 transition: background-color 0.3s ease, transform 0.2s ease;
               "
               onmouseover="this.style.backgroundColor='#2c2c3c'; this.style.transform='scale(1.05)'"
               onmouseout="this.style.backgroundColor='#1c1f2a'; this.style.transform='scale(1)'"
       >
         Online
       </button>
   </div>

   <!-- Title -->
   <h2 style="margin: 0; font-size: 24px; color: #fff;">Your Appointments</h2>

   <!-- Example counters (Total, Finished, Active) -->
   <div style="display: flex; gap: 20px;">
       <div style="text-align: center;">
           <p style="margin: 0; color: #cfcfcf; font-size: 14px;">Total</p>
           <p style="margin: 0; font-size: 20px; font-weight: bold; color: #fff;">{{ total_appointments }}</p>
       </div>
       <div style="text-align: center;">
           <p style="margin: 0; color: #cfcfcf; font-size: 14px;">In Clinic</p>
           <p style="margin: 0; font-size: 20px; font-weight: bold; color: #fff;">{{ in_clinic_appointments }}</p>
       </div>
       <div style="text-align: center;">
           <p style="margin: 0; color: #cfcfcf; font-size: 14px;">Online</p>
           <p style="margin: 0; font-size: 20px; font-weight: bold; color: #fff;">{{ online_appointments }}</p>
       </div>
       <div style="text-align: center;">
           <p style="margin: 0; color: #cfcfcf; font-size: 14px;">Finished</p>
           <p style="margin: 0; font-size: 20px; font-weight: bold; color: #fff;">{{ finished_appointments }}</p>
       </div>
       <div style="text-align: center;">
           <p style="margin: 0; color: #cfcfcf; font-size: 14px;">Active</p>
           <p style="margin: 0; font-size: 20px; font-weight: bold; color: #fff;">{{ active_appointments }}</p>
       </div>
   </div>

   <!-- Potential date or filter on the right -->
   <div style="margin-left: auto; color: #cfcfcf;">
       <strong>Today</strong> | {{ current_date }}
   </div>
</div>

    <!-- APPOINTMENTS TABLE WRAPPER -->
    <div class="appointments-card" id="inClinicCard" style="background: linear-gradient(135deg, #1f1f2f, #2c2c3c); border-radius: 8px; padding: 20px; box-shadow: 0 2px 4px rgba(255,255,255,0.05); display: block; color: #fff; border: 1px solid #efd959;  /* Gold accent border */">
        <!-- Tabs/Buttons: Appointments, Finished, Active -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <div style="display: flex; gap: 20px;">
                <button
                    id="showAll"
                    data-filter="all"
                    class="filter-btn {% if selected_filter == 'all' %}active{% else %}inactive{% endif %}"
                    style="
                        background-color: #1c1f2a;
                        color: #fff;
                        padding: 8px 16px;
                        border: 1px solid #efd959;
                        border-radius: 5px;
                        font-size: 16px;
                        cursor: pointer;
                        transition: background-color 0.3s ease, transform 0.2s ease;
                        height: 50px;
                    "
                    onmouseover="this.style.backgroundColor='#2c2c3c'; this.style.transform='scale(1.05)'"
                    onmouseout="this.style.backgroundColor='#1c1f2a'; this.style.transform='scale(1)'"
                >
                    Appointments
                </button>
                <button
                    id="showFinished"
                    data-filter="finished"
                    class="filter-btn {% if selected_filter == 'finished' %}active{% else %}inactive{% endif %}"
                    style="
                        background-color: #1c1f2a;
                        color: #fff;
                        padding: 8px 16px;
                        border: 1px solid #efd959;
                        border-radius: 5px;
                        font-size: 16px;
                        cursor: pointer;
                        transition: background-color 0.3s ease, transform 0.2s ease;
                        height: 50px;
                    "
                    onmouseover="this.style.backgroundColor='#2c2c3c'; this.style.transform='scale(1.05)'"
                    onmouseout="this.style.backgroundColor='#1c1f2a'; this.style.transform='scale(1)'"
                >
                    Finished
                </button>
                <button
                    id="showActive"
                    data-filter="active"
                    class="filter-btn {% if selected_filter == 'active' %}active{% else %}inactive{% endif %}"
                    style="
                        background-color: #1c1f2a;
                        color: #fff;
                        padding: 8px 16px;
                        border: 1px solid #efd959;
                        border-radius: 5px;
                        font-size: 16px;
                        cursor: pointer;
                        transition: background-color 0.3s ease, transform 0.2s ease;
                        height: 50px;
                    "
                    onmouseover="this.style.backgroundColor='#2c2c3c'; this.style.transform='scale(1.05)'"
                    onmouseout="this.style.backgroundColor='#1c1f2a'; this.style.transform='scale(1)'"
                >
                    Active
                </button>
            </div>
    
            <form id="filterForm" method="GET" action="">
                <div style="display: flex; align-items: center;">
                    <input
                        type="text"
                        name="q"
                        id="searchAppointments"
                        placeholder="Search by doctor's (name, contact or clinic)..."
                        value="{{ search_query }}"
                        style="padding: 5px 10px; border: 1px solid #555; border-radius: 4px; width: 350px; height: 50px;     background-color: #1f1f2f; color: #fff;"
                    />
                    <!-- Hidden input to store the selected filter -->
                    <input type="hidden" name="filter" id="selectedFilter" value="{{ selected_filter|default:'all' }}">
                    <button type="submit" style="background: none; border: none; margin-left: 8px;">
                        <img 
                            src="{% static 'images/search_icon_.png' %}" 
                            alt="Search Icon" 
                            style="width: 50px; height: 50px;"
                        />
                    </button>
                    <button type="submit" style="background: none; border: none; margin-left: 8px;">
                        <img 
                            src="{% static 'images/refresh_v2.png' %}" 
                            alt="Refresh Icon" 
                            style="width: 50px; height: 50px;"
                        />
                    </button>
                </div>
            </form>
        </div>
    
        <div id="appointmentsTable" style="background: linear-gradient(135deg, #1f1f2f, #2c2c3c); color: #fff;">
            <!-- Appointments Table -->
            <table
                style="width: 100%; border-collapse: separate; border-spacing: 0 8px; font-size: 14px;"
            >
                <tbody style="background-color: #2a2a2a;">
                    {% if appointments_page.object_list %}
                    {% for appointment in appointments_page.object_list %}
                    <!-- Example Row 1 -->
                    <tr style="background-color: #2a2a2a; border-radius: 6px; box-shadow: 0 1px 3px rgba(255,255,255,0.05); ">
                        <td colspan="2" style="padding: 10px; background-color: #1f1f2f; border: 1px solid #efd959;  /* Gold accent border */">
                            <strong>Appointment ID:</strong> {{ appointment.id }}
                            {% if appointment.start_date > today %}
                            <button class="status-btn active" style="background-color: #007bff; color: #fff; padding: 6px 12px; border: none; border-radius: 4px; font-size: 12px; margin-left: 10px;">
                                Active
                            </button>
                            {% elif appointment.start_date < today %}
                            <button class="status-btn finished" style="background-color: #777; color: #fff; padding: 6px 12px; border: none; border-radius: 4px; font-size: 12px; margin-left: 10px;">
                                Finished
                            </button>
                            {% else %}
                                {% if appointment.end_time > now_time %}
                                <button class="status-btn active" style="background-color: #007bff; color: #fff; padding: 6px 12px; border: none; border-radius: 4px; font-size: 12px; margin-left: 10px;">
                                    Active
                                </button>
                                {% else %}
                                <button class="status-btn finished" style="background-color: #777; color: #fff; padding: 6px 12px; border: none; border-radius: 4px; font-size: 12px; margin-left: 10px;">
                                    Finished
                                </button>
                                {% endif %}
                            {% endif %}
    
                            {% if not appointment.status %}
                            <span style="margin-left: 15px; color: #f44336; font-size: 14px; font-weight: bold;">
                                Please confirm your email.
                            </span>
                            {% endif %}
                        </td>
                    </tr>
                    <tr style="
                    background-color: #1f1f2f;  /* Dark variant for details */
                    border-radius: 6px;
                    box-shadow: 0 1px 3px rgba(255,255,255,0.05);
                ">
                    <td style="width: 50%; padding: 10px; vertical-align: top; font-size: 16px; color: #fff; border: 1px solid #efd959;  /* Gold accent border */">
                        <p style="font-weight: bold;">Client Details</p>
                        <p><strong>Name:</strong> {{ appointment.client_name }}</p>
                        <p><strong>Gender:</strong> {{ appointment.client_gender }}</p>
                        <p><strong>Contact:</strong> {{ appointment.client_contact }}</p>
                        <p><strong>Address:</strong> {{ appointment.client_address }}</p>
                        <p><strong>Clinic:</strong> {{ appointment.client_date_of_birth }}</p>
                    </td>

                    <td style="width: 50%; padding: 10px; vertical-align: top; font-size: 16px; color: #fff; border: 1px solid #efd959;  /* Gold accent border */">
                        <p style="font-weight: bold; text-align: left;">Appointment Details</p>
                        <p><strong>Start Date:</strong> {{ appointment.start_date }}</p>
                        <p><strong>Start Time:</strong> {{ appointment.start_time }}</p>
                        <p><strong>End Time:</strong> {{ appointment.end_time }}</p>
                        <p><strong>Duration:</strong> {{ appointment.duration }} minutes</p>
                        <p><strong>Status: </strong>
                            {% if appointment.status %}
                            <button style="
                                background-color: #24b47e;
                                color: #fff;
                                padding: 6px 12px;
                                border: none;
                                border-radius: 4px;
                                font-size: 12px;
                            ">
                                Confirmed
                            </button>
                            {% else %}
                            <button style="
                                background-color: #f44336;
                                color: #fff;
                                padding: 6px 12px;
                                border: none;
                                border-radius: 4px;
                                font-size: 12px;
                            ">
                                Not Confirmed
                            </button>
                            {% endif %}
                        </p>
                    </td>
                </tr>
                    {% endfor %}
                    {% else %}
                    <tr>
                        <td colspan="2" style="padding: 20px; text-align: center; font-size: 16px; font-weight: bold; color: #ccc; background-color: #1f1f2f; border-radius: 8px; box-shadow: 0 2px 4px rgba(255,255,255,0.1); border: 1px solid #efd959;  /* Gold accent border */">
                            No appointments.
                        </td>
                    </tr>
                    {% endif %}
                </tbody>
            </table>
    
            <!-- Pagination bar -->
            <div class="pagination-bar" style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding: 10px;">
                <!-- Left: Previous Button -->
                <div>
                    {% if appointments_page.has_previous %}
                    <a href="?page={{ appointments_page.previous_page_number }}" id="prevPage" class="page-btn" style="padding: 6px 12px; border: 1px solid #009acd; background: #1e1e1e; color: #009acd; border-radius: 4px; text-decoration: none;">
                        &laquo; Prev
                    </a>
                    {% else %}
                    <button id="prevPage" class="page-btn" style="padding: 6px 12px; border: 1px solid #444; background: #444; color: #999; border-radius: 4px;" disabled>
                        &laquo; Prev
                    </button>
                    {% endif %}
                </div>
    
                <!-- Center: Page Index Buttons -->
                <div style="display: flex; gap: 8px; align-items: center;">
                    {% for item in custom_page_range %}
                    {% if item == '...' %}
                    <span style="padding: 6px 12px; color: #999;">{{ item }}</span>
                    {% else %}
                        {% if item == appointments_page.number %}
                        <a href="?page={{ item }}" class="page-btn active" style="padding: 6px 12px; border: 1px solid #009acd; background: #009acd; color: #fff; border-radius: 4px; text-decoration: none;">
                            {{ item }}
                        </a>
                        {% else %}
                        <a href="?page={{ item }}" class="page-btn" style="padding: 6px 12px; border: 1px solid #009acd; background: #1e1e1e; color: #009acd; border-radius: 4px; text-decoration: none;">
                            {{ item }}
                        </a>
                        {% endif %}
                    {% endif %}
                    {% endfor %}
                </div>
    
                <!-- Right: Next Button -->
                <div>
                    {% if appointments_page.has_next %}
                    <a href="?page={{ appointments_page.next_page_number }}" id="nextPage" class="page-btn" style="padding: 6px 12px; border: 1px solid #009acd; background: #1e1e1e; color: #009acd; border-radius: 4px; text-decoration: none;">
                        Next &raquo;
                    </a>
                    {% else %}
                    <button id="nextPage" class="page-btn" style="padding: 6px 12px; border: 1px solid #444; background: #444; color: #999; border-radius: 4px;">
                        Next &raquo;
                    </button>
                    {% endif %}
                </div>
            </div>
        </div>
    
        <!-- ACTIVE APPOINTMENTS TABLE -->
        <div id="activeAppointmentsTable" style="background: linear-gradient(135deg, rgb(31, 31, 47), rgb(44, 44, 60)); color: #fff; margin-top: 20px; ">
            <table style="width: 100%; border-collapse: separate; border-spacing: 0 8px; font-size: 14px;">
                <tbody style="background-color: #2a2a2a;">
                    {% if appointments_page3.object_list %}
                    {% for appointment in appointments_page3.object_list %}
                    <tr style="background-color: #2a2a2a; border-radius: 6px; box-shadow: 0 1px 3px rgba(255,255,255,0.05);">
                        <td colspan="2" style="padding: 10px; background-color: #1f1f2f; border: 1px solid #efd959;  /* Gold accent border */">
                            <strong>Appointment ID:</strong> {{ appointment.id }}
                            <button style="
                                background-color: #007bff;
                                color: #fff;
                                padding: 6px 12px;
                                border: none;
                                border-radius: 4px;
                                font-size: 12px;
                                margin-left: 10px;
                            ">
                                Active
                            </button>
                            {% if not appointment.status %}
                            <span style="margin-left: 15px; color: #f44336; font-size: 14px; font-weight: bold;">
                                Please confirm your email.
                            </span>
                            {% endif %}
                        </td>
                    </tr>
                    <tr style="
                    background-color: #1f1f2f;  /* Dark variant for details */
                    border-radius: 6px;
                    box-shadow: 0 1px 3px rgba(255,255,255,0.05);
                ">
                    <td style="width: 50%; padding: 10px; vertical-align: top; font-size: 16px; color: #fff; border: 1px solid #efd959;  /* Gold accent border */">
                        <p style="font-weight: bold;">Client Details</p>
                        <p><strong>Name:</strong> {{ appointment.client_name }}</p>
                        <p><strong>Gender:</strong> {{ appointment.client_gender }}</p>
                        <p><strong>Contact:</strong> {{ appointment.client_contact }}</p>
                        <p><strong>Address:</strong> {{ appointment.client_address }}</p>
                        <p><strong>Clinic:</strong> {{ appointment.client_date_of_birth }}</p>
                    </td>

                    <td style="width: 50%; padding: 10px; vertical-align: top; font-size: 16px; color: #fff; border: 1px solid #efd959;  /* Gold accent border */">
                        <p style="font-weight: bold; text-align: left;">Appointment Details</p>
                        <p><strong>Start Date:</strong> {{ appointment.start_date }}</p>
                        <p><strong>Start Time:</strong> {{ appointment.start_time }}</p>
                        <p><strong>End Time:</strong> {{ appointment.end_time }}</p>
                        <p><strong>Duration:</strong> {{ appointment.duration }} minutes</p>
                        <p><strong>Status: </strong>
                            {% if appointment.status %}
                            <button style="
                                background-color: #24b47e;
                                color: #fff;
                                padding: 6px 12px;
                                border: none;
                                border-radius: 4px;
                                font-size: 12px;
                            ">
                                Confirmed
                            </button>
                            {% else %}
                            <button style="
                                background-color: #f44336;
                                color: #fff;
                                padding: 6px 12px;
                                border: none;
                                border-radius: 4px;
                                font-size: 12px;
                            ">
                                Not Confirmed
                            </button>
                            {% endif %}
                        </p>
                    </td>
                </tr>
                    {% endfor %}
                    {% else %}
                    <tr>
                        <td colspan="2" style="padding: 20px; text-align: center; font-size: 16px; font-weight: bold; color: #ccc; background-color: #1f1f2f; border-radius: 8px; box-shadow: 0 2px 4px rgba(255,255,255,0.1); border: 1px solid #efd959;  /* Gold accent border */">
                            No active appointments.
                        </td>
                    </tr>
                    {% endif %}
                </tbody>
            </table>
    
            <!-- Pagination Bar -->
            <div class="pagination-bar" style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding: 10px;">
                <!-- Left: Previous Button -->
                <div>
                    {% if appointments_page3.has_previous %}
                    <a href="?page3={{ appointments_page3.previous_page_number }}" id="prevPage" class="page-btn" style="padding: 6px 12px; border: 1px solid #009acd; background: #1e1e1e; color: #009acd; border-radius: 4px; text-decoration: none;">
                        &laquo; Prev
                    </a>
                    {% else %}
                    <button id="prevPage" class="page-btn" style="padding: 6px 12px; border: 1px solid #444; background: #444; color: #999; border-radius: 4px;" disabled>
                        &laquo; Prev
                    </button>
                    {% endif %}
                </div>
                
                <!-- Center: Page Index Buttons -->
                <div style="display: flex; gap: 8px; align-items: center;">
                    {% for item in custom_page_range3 %}
                    {% if item == '...' %}
                    <span style="padding: 6px 12px; color: #999;">{{ item }}</span>
                    {% else %}
                        {% if item == appointments_page3.number %}
                        <a href="?page3={{ item }}" class="page-btn active" style="padding: 6px 12px; border: 1px solid #009acd; background: #009acd; color: #fff; border-radius: 4px; text-decoration: none;">
                            {{ item }}
                        </a>
                        {% else %}
                        <a href="?page3={{ item }}" class="page-btn" style="padding: 6px 12px; border: 1px solid #009acd; background: #1e1e1e; color: #009acd; border-radius: 4px; text-decoration: none;">
                            {{ item }}
                        </a>
                        {% endif %}
                    {% endif %}
                    {% endfor %}
                </div>
                
                <!-- Right: Next Button -->
                <div>
                    {% if appointments_page3.has_next %}
                    <a href="?page3={{ appointments_page3.next_page_number }}" id="nextPage" class="page-btn" style="padding: 6px 12px; border: 1px solid #009acd; background: #1e1e1e; color: #009acd; border-radius: 4px; text-decoration: none;">
                        Next &raquo;
                    </a>
                    {% else %}
                    <button id="nextPage" class="page-btn" style="padding: 6px 12px; border: 1px solid #444; background: #444; color: #999; border-radius: 4px;">
                        Next &raquo;
                    </button>
                    {% endif %}
                </div>
            </div>
        </div>
    
        <!-- FINISHED APPOINTMENTS TABLE -->
        <div id="finishedAppointmentsTable" style="background: linear-gradient(135deg, #1f1f2f, #2c2c3c); color: #fff;  margin-top: 20px; ">
            <table style="width: 100%; border-collapse: separate; border-spacing: 0 8px; font-size: 14px; ">
                <tbody style="background-color: #2a2a2a;">
                    {% if appointments_page2.object_list %}
                    {% for appointment in appointments_page2.object_list %}
                    <tr style="background-color: #2a2a2a; border-radius: 6px; box-shadow: 0 1px 3px rgba(255,255,255,0.05);">
                        <td colspan="2" style="padding: 10px; background-color: #1f1f2f; border: 1px solid #efd959;  /* Gold accent border */">
                            <strong>Appointment ID:</strong> {{ appointment.id }}
                            <button style="
                                background-color: #777;
                                color: #fff;
                                padding: 6px 12px;
                                border: none;
                                border-radius: 4px;
                                font-size: 12px;
                                margin-left: 10px;
                            ">
                                Finished
                            </button>
                            {% if not appointment.status %}
                            <span style="margin-left: 15px; color: #f44336; font-size: 14px; font-weight: bold;">
                                Please confirm your email.
                            </span>
                            {% endif %}
                        </td>
                    </tr>
                    <tr style="
                    background-color: #1f1f2f;  /* Dark variant for details */
                    border-radius: 6px;
                    box-shadow: 0 1px 3px rgba(255,255,255,0.05);
                ">
                    <td style="width: 50%; padding: 10px; vertical-align: top; font-size: 16px; color: #fff; border: 1px solid #efd959;  /* Gold accent border */">
                        <p style="font-weight: bold;">Client Details</p>
                        <p><strong>Name:</strong> {{ appointment.client_name }}</p>
                        <p><strong>Gender:</strong> {{ appointment.client_gender }}</p>
                        <p><strong>Contact:</strong> {{ appointment.client_contact }}</p>
                        <p><strong>Address:</strong> {{ appointment.client_address }}</p>
                        <p><strong>Clinic:</strong> {{ appointment.client_date_of_birth }}</p>
                    </td>

                    <td style="width: 50%; padding: 10px; vertical-align: top; font-size: 16px; color: #fff; border: 1px solid #efd959;  /* Gold accent border */">
                        <p style="font-weight: bold; text-align: left;">Appointment Details</p>
                        <p><strong>Start Date:</strong> {{ appointment.start_date }}</p>
                        <p><strong>Start Time:</strong> {{ appointment.start_time }}</p>
                        <p><strong>End Time:</strong> {{ appointment.end_time }}</p>
                        <p><strong>Duration:</strong> {{ appointment.duration }} minutes</p>
                        <p><strong>Status: </strong>
                            {% if appointment.status %}
                            <button style="
                                background-color: #24b47e;
                                color: #fff;
                                padding: 6px 12px;
                                border: none;
                                border-radius: 4px;
                                font-size: 12px;
                            ">
                                Confirmed
                            </button>
                            {% else %}
                            <button style="
                                background-color: #f44336;
                                color: #fff;
                                padding: 6px 12px;
                                border: none;
                                border-radius: 4px;
                                font-size: 12px;
                            ">
                                Not Confirmed
                            </button>
                            {% endif %}
                        </p>
                    </td>
                </tr>
                    {% endfor %}
                    {% else %}
                    <tr>
                        <td colspan="2" style="padding: 20px; text-align: center; font-size: 16px; font-weight: bold; color: #ccc; background-color: #1f1f2f; border-radius: 8px; box-shadow: 0 2px 4px rgba(255,255,255,0.1); border: 1px solid #efd959;  /* Gold accent border */">
                            No finished appointments.
                        </td>
                    </tr>
                    {% endif %}
                </tbody>
            </table>
    
            <!-- Pagination Bar -->
            <div class="pagination-bar" style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding: 10px;">
                <!-- Left: Previous Button -->
                <div>
                    {% if appointments_page2.has_previous %}
                    <a href="?page2={{ appointments_page2.previous_page_number }}" id="prevPage" class="page-btn" style="padding: 6px 12px; border: 1px solid #009acd; background: #1e1e1e; color: #009acd; border-radius: 4px; text-decoration: none;">
                        &laquo; Prev
                    </a>
                    {% else %}
                    <button id="prevPage" class="page-btn" style="padding: 6px 12px; border: 1px solid #444; background: #444; color: #999; border-radius: 4px;" disabled>
                        &laquo; Prev
                    </button>
                    {% endif %}
                </div>
                
                <!-- Center: Page Index Buttons -->
                <div style="display: flex; gap: 8px; align-items: center;">
                    {% for item in custom_page_range2 %}
                    {% if item == '...' %}
                    <span style="padding: 6px 12px; color: #999;">{{ item }}</span>
                    {% else %}
                        {% if item == appointments_page2.number %}
                        <a href="?page2={{ item }}" class="page-btn active" style="padding: 6px 12px; border: 1px solid #009acd; background: #009acd; color: #fff; border-radius: 4px; text-decoration: none;">
                            {{ item }}
                        </a>
                        {% else %}
                        <a href="?page2={{ item }}" class="page-btn" style="padding: 6px 12px; border: 1px solid #009acd; background: #1e1e1e; color: #009acd; border-radius: 4px; text-decoration: none;">
                            {{ item }}
                        </a>
                        {% endif %}
                    {% endif %}
                    {% endfor %}
                </div>
                
                <!-- Right: Next Button -->
                <div>
                    {% if appointments_page2.has_next %}
                    <a href="?page2={{ appointments_page2.next_page_number }}" id="nextPage" class="page-btn" style="padding: 6px 12px; border: 1px solid #009acd; background: #1e1e1e; color: #009acd; border-radius: 4px; text-decoration: none;">
                        Next &raquo;
                    </a>
                    {% else %}
                    <button id="nextPage" class="page-btn" style="padding: 6px 12px; border: 1px solid #444; background: #444; color: #999; border-radius: 4px;">
                        Next &raquo;
                    </button>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

          

<div 
id="onlineCard" 
class="appointments-card" 
style="
    background: linear-gradient(135deg, #1f1f2f, #2c2c3c);  /* Dark container background */
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.5);
    margin-bottom: 20px;
    display: none; /* hidden by default */
    color: #cfcfcf;
    border: 1px solid #efd959;  /* Gold accent border */
"
>
<!-- Tabs/Buttons: Appointments, Finished, Active -->
<div style="
    display: flex; 
    justify-content: space-between; 
    align-items: center;
    margin-bottom: 20px;
">
    <div style="display: flex; gap: 20px;">
        <button
            id="showAllOnline"
            data-filter-online="allOnline"
            class="filter-btn-online {% if selected_filter_online == 'allOnline' %}active{% else %}inactive{% endif %}"
            onclick="filterAppointmentsOnline('allOnline')"
            style="
                background-color: #1c1f2a;
                color: #fff;
                padding: 8px 16px;
                border: 1px solid #efd959;
                border-radius: 5px;
                font-size: 16px;
                cursor: pointer;
                transition: background-color 0.3s ease, transform 0.2s ease;
                height: 50px;
            "
            onmouseover="this.style.backgroundColor='#2c2c3c'; this.style.transform='scale(1.05)'"
            onmouseout="this.style.backgroundColor='#1c1f2a'; this.style.transform='scale(1)'"
        >
            Appointments
        </button>
        <button
            id="showFinishedOnline"
            data-filter-online="finishedOnline"
            class="filter-btn-online {% if selected_filter_online == 'finishedOnline' %}active{% else %}inactive{% endif %}"
            onclick="filterAppointmentsOnline('finishedOnline')"
            style="
                background-color: #1c1f2a;
                color: #fff;
                padding: 8px 16px;
                border: 1px solid #efd959;
                border-radius: 5px;
                font-size: 16px;
                cursor: pointer;
                transition: background-color 0.3s ease, transform 0.2s ease;
                height: 50px;
            "
            onmouseover="this.style.backgroundColor='#2c2c3c'; this.style.transform='scale(1.05)'"
            onmouseout="this.style.backgroundColor='#1c1f2a'; this.style.transform='scale(1)'"
        >
            Finished
        </button>
        <button
            id="showActiveOnline"
            data-filter-online="activeOnline"
            class="filter-btn-online {% if selected_filter_online == 'activeOnline' %}active{% else %}inactive{% endif %}"
            onclick="filterAppointmentsOnline('activeOnline')"
            style="
                background-color: #1c1f2a;
                color: #fff;
                padding: 8px 16px;
                border: 1px solid #efd959;
                border-radius: 5px;
                font-size: 16px;
                cursor: pointer;
                transition: background-color 0.3s ease, transform 0.2s ease;
                height: 50px;
            "
            onmouseover="this.style.backgroundColor='#2c2c3c'; this.style.transform='scale(1.05)'"
            onmouseout="this.style.backgroundColor='#1c1f2a'; this.style.transform='scale(1)'"
        >
            Active
        </button>
    </div>

    <form id="filterFormOnline" method="GET" action="">
        <div style="display: flex; align-items: center;">
            <input
                type="text"
                name="q"
                id="searchAppointments"
                placeholder="Search by doctor's (name, contact or clinic)..."
                value="{{ search_query }}"
                style="
                    padding: 5px 10px;
                    border: 1px solid #555;
                    border-radius: 4px;
                    width: 350px; 
                    height: 50px; 
                    background-color: #1f1f2f;
                    color: #cfcfcf;
                "
            />
            <!-- Hidden input to store the selected filter -->
            <input type="hidden" name="filterOnline" id="selectedFilterOnline" value="{{ selected_filter_online|default:'allOnline' }}">
            <button type="submit" style="background: none; border: none; margin-left: 8px; cursor: pointer;">
                <img 
                    src="{% static 'images/search_icon_.png' %}" 
                    alt="Search Icon" 
                    style="width: 50px; height: 50px;"
                />
            </button>
            <button type="submit" style="background: none; border: none; margin-left: 8px; cursor: pointer;">
                <img 
                    src="{% static 'images/refresh_v2.png' %}" 
                    alt="Refresh Icon" 
                    style="width: 50px; height: 50px;"
                />
            </button>
        </div>
    </form>
</div>

<div id="appointmentsTableOnline">
    <!-- Appointments Table -->
    <table style="
        width: 100%;
        border-collapse: separate;
        border-spacing: 0 8px;
        font-size: 14px;
        background: linear-gradient(135deg, #1f1f2f, #2c2c3c);
    ">
        <tbody style="background-color: #2c2c3c; color: #cfcfcf;">
            {% if appointments_page4.object_list %}
            {% for appointment in appointments_page4.object_list %}
            <!-- Example Row 1 -->
            <tr style="
                background-color: #2c2c3c;
                border-radius: 6px;
                box-shadow: 0 1px 3px rgba(0,0,0,0.5);
            ">
                <td colspan="2" style="padding: 10px; background-color: #1f1f2f; border: 1px solid #efd959;  /* Gold accent border */">
                    <strong>Appointment ID:</strong> {{ appointment.id }}
                   
                    {% if appointment.start_date > today %}
                        <button class="status-btn active" style="
                            background-color: #007bff;
                            color: #fff;
                            padding: 6px 12px;
                            border: none;
                            border-radius: 4px;
                            font-size: 12px;
                            margin-left: 10px;
                        ">
                            Active
                        </button>
                    {% elif appointment.start_date < today %}
                        <button class="status-btn finished" style="
                            background-color: #777;
                            color: #fff;
                            padding: 6px 12px;
                            border: none;
                            border-radius: 4px;
                            font-size: 12px;
                            margin-left: 10px;
                        ">
                            Finished
                        </button>
                    {% else %}
                        {% if appointment.end_time > now_time %}
                            <button class="status-btn active" style="
                                background-color: #007bff;
                                color: #fff;
                                padding: 6px 12px;
                                border: none;
                                border-radius: 4px;
                                font-size: 12px;
                                margin-left: 10px;
                            ">
                                Active
                            </button>
                        {% else %}
                            <button class="status-btn finished" style="
                                background-color: #777;
                                color: #fff;
                                padding: 6px 12px;
                                border: none;
                                border-radius: 4px;
                                font-size: 12px;
                                margin-left: 10px;
                            ">
                                Finished
                            </button>
                        {% endif %}
                    {% endif %}

                    {% if not appointment.status %}
                    <span style="
                        margin-left: 15px;
                        color: #f44336; /* Red color for warning */
                        font-size: 14px;
                        font-weight: bold;
                    ">
                        Please confirm your email.
                    </span>  
                    {% endif %}
                </td>
            </tr>
            <tr style="
            background-color: #1f1f2f;  /* Dark variant for details */
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(255,255,255,0.05);
        ">
            <td style="width: 50%; padding: 10px; vertical-align: top; font-size: 16px; color: #fff; border: 1px solid #efd959;  /* Gold accent border */">
                <p style="font-weight: bold;">Client Details</p>
                <p><strong>Name:</strong> {{ appointment.client_name }}</p>
                <p><strong>Gender:</strong> {{ appointment.client_gender }}</p>
                <p><strong>Contact:</strong> {{ appointment.client_contact }}</p>
                <p><strong>Address:</strong> {{ appointment.client_address }}</p>
                <p><strong>Clinic:</strong> {{ appointment.client_date_of_birth }}</p>
            </td>

            <td style="width: 50%; padding: 10px; vertical-align: top; font-size: 16px; color: #fff; border: 1px solid #efd959;  /* Gold accent border */">
                <p style="font-weight: bold; text-align: left;">Appointment Details</p>
                <p><strong>Start Date:</strong> {{ appointment.start_date }}</p>
                <p><strong>Start Time:</strong> {{ appointment.start_time }}</p>
                <p><strong>End Time:</strong> {{ appointment.end_time }}</p>
                <p><strong>Duration:</strong> {{ appointment.duration }} minutes</p>
                <p><strong>Status: </strong>
                    {% if appointment.status %}
                    <button style="
                        background-color: #24b47e;
                        color: #fff;
                        padding: 6px 12px;
                        border: none;
                        border-radius: 4px;
                        font-size: 12px;
                    ">
                        Confirmed
                    </button>
                    {% else %}
                    <button style="
                        background-color: #f44336;
                        color: #fff;
                        padding: 6px 12px;
                        border: none;
                        border-radius: 4px;
                        font-size: 12px;
                    ">
                        Not Confirmed
                    </button>
                    {% endif %}
                </p>
            </td>
        </tr>
        <tr style="
            background-color: #1f1f2f;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(255,255,255,0.05);
        ">
            <td colspan="2" style="padding: 10px; font-size: 16px; color: #fff; border: 1px solid #efd959;  /* Gold accent border */">
                <p style="font-weight: bold;">Meeting Details</p>
                <p><strong>Platform:</strong> {{ appointment.platform }}</p>
                <p>
                    <strong>Meeting Link:</strong>
                    <a href="https://meet.jit.si/exampleRoom" target="_blank" style="color: #fff;">{{ appointment.call_link }}</a>
                </p>
            </td>
        </tr>
        
        
            {% endfor %}
            {% else %}
                <tr>
                    <td colspan="2" style="
                        padding: 20px; 
                        text-align: center; 
                        font-size: 16px;
                        font-weight: bold;
                        color: #ccc;
                        background-color: #1f1f2f;
                        border: 1px solid #444;
                        border-radius: 8px;
                        box-shadow: 0 2px 4px rgba(0,0,0,0.5);
                        border: 1px solid #efd959;  /* Gold accent border */
                    ">
                        No appointments.
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>

    <!-- Pagination Bar -->
    <div class="pagination-bar" style="
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
        margin-top: 20px;
        padding: 10px;
    ">
        <!-- Left: Previous Button -->
        <div>
            {% if appointments_page4.has_previous %}
            <a href="?page4={{ appointments_page4.previous_page_number }}" 
               id="prevPage" 
               class="page-btn"
               style="
                   padding: 6px 12px; 
                   border: 1px solid #009acd; 
                   background: #2c2c3c; 
                   color: #cfcfcf; 
                   border-radius: 4px;
                   text-decoration: none;
               ">
                &laquo; Prev
            </a>
            {% else %}
            <button 
                id="prevPage" 
                class="page-btn" 
                style="
                    padding: 6px 12px; 
                    border: 1px solid #009acd;
                    background: #2c2c3c; 
                    color: #cfcfcf; 
                    border-radius: 4px;
                "
                disabled
            >
                &laquo; Prev
            </button>
            {% endif %}
        </div>
      
        <!-- Center: Page Index Buttons -->
        <div style="display: flex; gap: 8px; align-items: center;">
            {% for item in custom_page_range4 %}
            {% if item == '...' %}
            <span style="padding: 6px 12px; color: #009acd;">{{ item }}</span>
            {% else %}
                {% if item == appointments_page4.number %}
                <a href="?page4={{ item }}" 
                   class="page-btn active" 
                   style="
                       padding: 6px 12px; 
                       border: 1px solid #009acd; 
                       background: #009acd; 
                       color: #fff; 
                       border-radius: 4px;
                       text-decoration: none;
                   ">
                    {{ item }}
                </a>
                {% else %}
                <a href="?page4={{ item }}" 
                   class="page-btn" 
                   style="
                       padding: 6px 12px; 
                       border: 1px solid #009acd; 
                       background: #2c2c3c; 
                       color: #cfcfcf; 
                       border-radius: 4px;
                       text-decoration: none;
                   ">
                    {{ item }}
                </a>
                {% endif %}
            {% endif %}
            {% endfor %}
        </div>
        
        <!-- Right: Next Button -->
        <div>
         {% if appointments_page4.has_next %}
         <a href="?page4={{ appointments_page4.next_page_number }}" 
            id="nextPage" 
            class="page-btn" 
            style="
                padding: 6px 12px; 
                border: 1px solid #009acd; 
                background: #2c2c3c; 
                color: #cfcfcf; 
                border-radius: 4px;
                text-decoration: none;
            ">
             Next &raquo;
          </a>
         {% else %}
          <button id="nextPage" class="page-btn" style="
              padding: 6px 12px; 
              border: 1px solid #009acd;
              background: #2c2c3c; 
              color: #cfcfcf; 
              border-radius: 4px;
          ">
            Next &raquo;
          </button>
          {% endif %}
        </div>
    </div>
</div>

<div id="activeAppointmentsTableOnline">
    <!-- Active Appointments Table -->
    <table style="
        width: 100%;
        border-collapse: separate;
        border-spacing: 0 8px;
        font-size: 14px;
        background: linear-gradient(135deg, #1f1f2f, #2c2c3c);
    ">
        <tbody style="background-color: #2c2c3c; color: #cfcfcf;">
            {% if appointments_page6.object_list %}
            {% for appointment in appointments_page6.object_list %}
            <!-- Example Row 1 -->
            <tr style="
                background-color: #2c2c3c;
                border-radius: 6px;
                box-shadow: 0 1px 3px rgba(0,0,0,0.5);
            ">
                <td colspan="2" style="padding: 10px; background-color: #1f1f2f; border: 1px solid #efd959;  /* Gold accent border */">
                    <strong>Appointment ID:</strong> {{ appointment.id }}
                    <button style="
                        background-color: #007bff;
                        color: #fff;
                        padding: 6px 12px;
                        border: none;
                        border-radius: 4px;
                        font-size: 12px;
                        margin-left: 10px;
                    ">
                        Active
                    </button>
                    {% if not appointment.status %}
                    <span style="
                        margin-left: 15px;
                        color: #f44336;
                        font-size: 14px;
                        font-weight: bold;
                    ">
                        Please confirm your email.
                    </span>
                    {% endif %}
                </td>
            </tr>
            <tr style="
            background-color: #1f1f2f;  /* Dark variant for details */
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(255,255,255,0.05);
        ">
            <td style="width: 50%; padding: 10px; vertical-align: top; font-size: 16px; color: #fff; border: 1px solid #efd959;  /* Gold accent border */">
                <p style="font-weight: bold;">Client Details</p>
                <p><strong>Name:</strong> {{ appointment.client_name }}</p>
                <p><strong>Gender:</strong> {{ appointment.client_gender }}</p>
                <p><strong>Contact:</strong> {{ appointment.client_contact }}</p>
                <p><strong>Address:</strong> {{ appointment.client_address }}</p>
                <p><strong>Clinic:</strong> {{ appointment.client_date_of_birth }}</p>
            </td>

            <td style="width: 50%; padding: 10px; vertical-align: top; font-size: 16px; color: #fff; border: 1px solid #efd959;  /* Gold accent border */">
                <p style="font-weight: bold; text-align: left;">Appointment Details</p>
                <p><strong>Start Date:</strong> {{ appointment.start_date }}</p>
                <p><strong>Start Time:</strong> {{ appointment.start_time }}</p>
                <p><strong>End Time:</strong> {{ appointment.end_time }}</p>
                <p><strong>Duration:</strong> {{ appointment.duration }} minutes</p>
                <p><strong>Status: </strong>
                    {% if appointment.status %}
                    <button style="
                        background-color: #24b47e;
                        color: #fff;
                        padding: 6px 12px;
                        border: none;
                        border-radius: 4px;
                        font-size: 12px;
                    ">
                        Confirmed
                    </button>
                    {% else %}
                    <button style="
                        background-color: #f44336;
                        color: #fff;
                        padding: 6px 12px;
                        border: none;
                        border-radius: 4px;
                        font-size: 12px;
                    ">
                        Not Confirmed
                    </button>
                    {% endif %}
                </p>
            </td>
        </tr>
        <tr style="
            background-color: #1f1f2f;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(255,255,255,0.05);
        ">
            <td colspan="2" style="padding: 10px; font-size: 16px; color: #fff; border: 1px solid #efd959;  /* Gold accent border */">
                <p style="font-weight: bold;">Meeting Details</p>
                <p><strong>Platform:</strong> {{ appointment.platform }}</p>
                <p>
                    <strong>Meeting Link:</strong>
                    <a href="https://meet.jit.si/exampleRoom" target="_blank" style="color: #fff;">{{ appointment.call_link }}</a>
                </p>
            </td>
        </tr>
        

            {% endfor %}
            {% else %}
            <tr>
                <td colspan="2" style="
                    padding: 20px;
                    text-align: center;
                    font-size: 16px;
                    font-weight: bold;
                    color: #ccc;
                    background-color: #1f1f2f;
                    border: 1px solid #444;
                    border-radius: 8px;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.5);
                    border: 1px solid #efd959;  /* Gold accent border */
                ">
                    No active appointments.
                </td>
            </tr>
            {% endif %}
        </tbody>
    </table>
  
    <!-- Pagination Bar -->
    <div class="pagination-bar" style="
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 20px;
        padding: 10px;
    ">
        <!-- Left: Previous Button -->
        <div>
            {% if appointments_page6.has_previous %}
            <a href="?page6={{ appointments_page6.previous_page_number }}"
               id="prevPage"
               class="page-btn"
               style="
                 padding: 6px 12px;
                 border: 1px solid #444;
                 background: #2c2c3c;
                 color: #cfcfcf;
                 border-radius: 4px;
                 text-decoration: none;
               ">
                &laquo; Prev
            </a>
            {% else %}
            <button id="prevPage" class="page-btn" style="
                padding: 6px 12px;
                border: 1px solid #444;
                background: #2c2c3c;
                color: #cfcfcf;
                border-radius: 4px;
            " disabled>
                &laquo; Prev
            </button>
            {% endif %}
        </div>
        
        <!-- Center: Page Index Buttons -->
        <div style="display: flex; gap: 8px; align-items: center;">
            {% for item in custom_page_range6 %}
            {% if item == '...' %}
            <span style="padding: 6px 12px; color: #cfcfcf;">{{ item }}</span>
            {% else %}
                {% if item == appointments_page6.number %}
                <a href="?page6={{ item }}"
                   class="page-btn active"
                   style="
                     padding: 6px 12px;
                     border: 1px solid #009acd;
                     background: #009acd;
                     color: #fff;
                     border-radius: 4px;
                     text-decoration: none;
                   ">
                    {{ item }}
                </a>
                {% else %}
                <a href="?page6={{ item }}"
                   class="page-btn"
                   style="
                     padding: 6px 12px;
                     border: 1px solid #444;
                     background: #2c2c3c;
                     color: #cfcfcf;
                     border-radius: 4px;
                     text-decoration: none;
                   ">
                    {{ item }}
                </a>
                {% endif %}
            {% endif %}
            {% endfor %}
        </div>
        
        <!-- Right: Next Button -->
        <div>
            {% if appointments_page6.has_next %}
            <a href="?page6={{ appointments_page6.next_page_number }}"
               id="nextPage"
               class="page-btn"
               style="
                 padding: 6px 12px; 
                 border: 1px solid #444;
                 background: #2c2c3c; 
                 color: #cfcfcf; 
                 border-radius: 4px;
                 text-decoration: none;
               ">
                Next &raquo;
            </a>
            {% else %}
            <button id="nextPage" class="page-btn" style="
                padding: 6px 12px; 
                border: 1px solid #444;
                background: #2c2c3c; 
                color: #cfcfcf; 
                border-radius: 4px;
            ">
                Next &raquo;
            </button>
            {% endif %}
        </div>
    </div>
</div>

<div id="finishedAppointmentsTableOnline">
    <table style="
        width: 100%;
        border-collapse: separate;
        border-spacing: 0 8px;
        font-size: 14px;
        background: linear-gradient(135deg, #1f1f2f, #2c2c3c);
    ">
        <tbody style="background-color: #2c2c3c; color: #cfcfcf;">
            {% if appointments_page5.object_list %}
            {% for appointment in appointments_page5.object_list %}
            <!-- Example Row 1 -->
            <tr style="
                background-color: #2c2c3c;
                border-radius: 6px;
                box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            ">
                <td colspan="2" style="padding: 10px; background-color: #1f1f2f; border: 1px solid #efd959;  /* Gold accent border */">
                    <strong>Appointment ID:</strong> {{ appointment.id }}
                    <button style="
                        background-color: #777;
                        color: #fff;
                        padding: 6px 12px;
                        border: none;
                        border-radius: 4px;
                        font-size: 12px;
                        margin-left: 10px;
                    ">
                        Finished
                    </button>
                    {% if not appointment.status %}
                    <span style="
                        margin-left: 15px;
                        color: #f44336;
                        font-size: 14px;
                        font-weight: bold;
                    ">
                        Please confirm your email.
                    </span>  
                    {% endif %}
                </td>
            </tr>
            <tr style="
            background-color: #1f1f2f;  /* Dark variant for details */
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(255,255,255,0.05);
        ">
            <td style="width: 50%; padding: 10px; vertical-align: top; font-size: 16px; color: #fff; border: 1px solid #efd959;  /* Gold accent border */">
                <p style="font-weight: bold;">Client Details</p>
                <p><strong>Name:</strong> {{ appointment.client_name }}</p>
                <p><strong>Gender:</strong> {{ appointment.client_gender }}</p>
                <p><strong>Contact:</strong> {{ appointment.client_contact }}</p>
                <p><strong>Address:</strong> {{ appointment.client_address }}</p>
                <p><strong>Clinic:</strong> {{ appointment.client_date_of_birth }}</p>
            </td>

            <td style="width: 50%; padding: 10px; vertical-align: top; font-size: 16px; color: #fff; border: 1px solid #efd959;  /* Gold accent border */">
                <p style="font-weight: bold; text-align: left;">Appointment Details</p>
                <p><strong>Start Date:</strong> {{ appointment.start_date }}</p>
                <p><strong>Start Time:</strong> {{ appointment.start_time }}</p>
                <p><strong>End Time:</strong> {{ appointment.end_time }}</p>
                <p><strong>Duration:</strong> {{ appointment.duration }} minutes</p>
                <p><strong>Status: </strong>
                    {% if appointment.status %}
                    <button style="
                        background-color: #24b47e;
                        color: #fff;
                        padding: 6px 12px;
                        border: none;
                        border-radius: 4px;
                        font-size: 12px;
                    ">
                        Confirmed
                    </button>
                    {% else %}
                    <button style="
                        background-color: #f44336;
                        color: #fff;
                        padding: 6px 12px;
                        border: none;
                        border-radius: 4px;
                        font-size: 12px;
                    ">
                        Not Confirmed
                    </button>
                    {% endif %}
                </p>
            </td>
        </tr>
        <tr style="
            background-color: #1f1f2f;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(255,255,255,0.05);
        ">
            <td colspan="2" style="padding: 10px; font-size: 16px; color: #fff; border: 1px solid #efd959;  /* Gold accent border */">
                <p style="font-weight: bold;">Meeting Details</p>
                <p><strong>Platform:</strong> {{ appointment.platform }}</p>
                <p>
                    <strong>Meeting Link:</strong>
                    <a href="https://meet.jit.si/exampleRoom" target="_blank" style="color: #fff;">{{ appointment.call_link }}</a>
                </p>
            </td>
        </tr>
        
            {% endfor %}
            {% else %}
                <tr>
                    <td colspan="2" style="
                        padding: 20px; 
                        text-align: center; 
                        font-size: 16px;
                        font-weight: bold;
                        color: #ccc;
                        background-color: #1f1f2f;
                        border: 1px solid #444;
                        border-radius: 8px;
                        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                        border: 1px solid #efd959;  /* Gold accent border */
                    ">
                        No finished appointments.
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>
    
    <!-- Pagination Bar -->
    <div class="pagination-bar" style="
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
        margin-top: 20px;
        padding: 10px;
    ">
        <!-- Left: Previous Button -->
        <div>
            {% if appointments_page5.has_previous %}
            <a href="?page5={{ appointments_page5.previous_page_number }}" 
               id="prevPage" 
               class="page-btn"
               style="
                   padding: 6px 12px; 
                   border: 1px solid #009acd; 
                   background: #2c2c3c; 
                   color: #cfcfcf; 
                   border-radius: 4px;
                   text-decoration: none;
               ">
                &laquo; Prev
            </a>
            {% else %}
            <button id="prevPage" class="page-btn" style="
                padding: 6px 12px; 
                border: 1px solid #009acd;
                background: #2c2c3c; 
                color: #cfcfcf; 
                border-radius: 4px;
            " disabled>
                &laquo; Prev
            </button>
            {% endif %}
        </div>
        
        <!-- Center: Page Index Buttons -->
        <div style="display: flex; gap: 8px; align-items: center;">
            {% for item in custom_page_range5 %}
            {% if item == '...' %}
            <span style="padding: 6px 12px; color: #009acd;">{{ item }}</span>
            {% else %}
                {% if item == appointments_page5.number %}
                <a href="?page5={{ item }}" 
                   class="page-btn active" 
                   style="
                       padding: 6px 12px; 
                       border: 1px solid #009acd; 
                       background: #009acd; 
                       color: #fff; 
                       border-radius: 4px;
                       text-decoration: none;
                   ">
                    {{ item }}
                </a>
                {% else %}
                <a href="?page5={{ item }}" 
                   class="page-btn" 
                   style="
                       padding: 6px 12px; 
                       border: 1px solid #009acd; 
                       background: #2c2c3c; 
                       color: #cfcfcf; 
                       border-radius: 4px;
                       text-decoration: none;
                   ">
                    {{ item }}
                </a>
                {% endif %}
            {% endif %}
            {% endfor %}
        </div>
        
        <!-- Right: Next Button -->
        <div>
         {% if appointments_page5.has_next %}
         <a href="?page5={{ appointments_page5.next_page_number }}" 
            id="nextPage" 
            class="page-btn" 
            style="
                padding: 6px 12px; 
                border: 1px solid #009acd; 
                background: #2c2c3c; 
                color: #cfcfcf; 
                border-radius: 4px;
                text-decoration: none;
            ">
             Next &raquo;
          </a>
         {% else %}
          <button id="nextPage" class="page-btn" style="
              padding: 6px 12px; 
              border: 1px solid #009acd;
              background: #2c2c3c; 
              color: #cfcfcf; 
              border-radius: 4px;
          ">
            Next &raquo;
          </button>
          {% endif %}
        </div>
    </div>
</div>
</div>

</div>

{% if messages %}
<div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="successModalLabel">Notification</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                {% for message in messages %}
                <p>{{ message }}</p>
                {% endfor %}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const modal = new bootstrap.Modal(document.getElementById('successModal'));
        modal.show();
    });
</script>
{% endif %}

<style>
    /* Common styles for all filter buttons */
    .filter-btn {
        border: 1px solid #efd959;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s, color 0.3s;
        background-color: #1c1f2a;
        color: #efd959;
    }

    /* Active state */
    .filter-btn.active {
        background-color: #2c2c3c;
        color: #efd959;
    }

    /* Inactive state */
    .filter-btn.inactive {
        background-color: #1c1f2a;
        color: #efd959;
    }

    .filter-btn-online {
        border: 1px solid #efd959;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s, color 0.3s;
        background-color: #1c1f2a;
        color: #efd959;
    }

    /* Active state */
    .filter-btn-online.active {
        background-color: #2c2c3c;
        color: #efd959;
    }

    /* Inactive state */
    .filter-btn-online.inactive {
        background-color: #1c1f2a;
        color: #efd959;
    }

    .status-btn {
        padding: 6px 12px;
        border: 1px solid #efd959;
        border-radius: 4px;
        font-size: 12px;
        color: #efd959;
        cursor: default;
        background-color: #1c1f2a;
    }

    .status-btn.active {
        background-color: #2c2c3c;
    }

    .status-btn.finished {
        background-color: #1c1f2a;
    }

    .content {
        margin-top: 80px;
        background: linear-gradient(135deg, #1f1f2f, #2c2c3c);
    }
</style>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Select all filter buttons
        const selectedFilter = document.getElementById('selectedFilter').value;
        filterAppointments(selectedFilter);

        const filterButtons = document.querySelectorAll('.filter-btn');
        const selectedFilterInput = document.getElementById('selectedFilter');
        const filterForm = document.getElementById('filterForm');
        const searchInput = document.getElementById('searchAppointments');

        filterAppointments(selectedFilterInput.value);

        // Add search functionality
        searchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const currentView = document.getElementById('inClinicCard').style.display === 'block' ? 'inClinic' : 'online';
            const currentFilter = selectedFilterInput.value;
            
            // Get the appropriate table based on current view and filter
            let tableToSearch;
            if (currentView === 'inClinic') {
                if (currentFilter === 'all') {
                    tableToSearch = document.getElementById('appointmentsTable');
                } else if (currentFilter === 'active') {
                    tableToSearch = document.getElementById('activeAppointmentsTable');
                } else if (currentFilter === 'finished') {
                    tableToSearch = document.getElementById('finishedAppointmentsTable');
                }
            } else {
                if (currentFilter === 'allOnline') {
                    tableToSearch = document.getElementById('appointmentsTableOnline');
                } else if (currentFilter === 'activeOnline') {
                    tableToSearch = document.getElementById('activeAppointmentsTableOnline');
                } else if (currentFilter === 'finishedOnline') {
                    tableToSearch = document.getElementById('finishedAppointmentsTableOnline');
                }
            }

            if (tableToSearch) {
                const rows = tableToSearch.getElementsByTagName('tr');
                for (let row of rows) {
                    const text = row.textContent.toLowerCase();
                    if (text.includes(searchTerm)) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                }
            }
        });

        filterButtons.forEach(button => {
            button.addEventListener('click', function (e) {
                e.preventDefault();

                const filter = this.getAttribute('data-filter');

                // Update the hidden input field with the selected filter
                selectedFilterInput.value = filter;

                // Remove 'active' class and add 'inactive' to all buttons
                filterButtons.forEach(btn => {
                    btn.classList.remove('active');
                    btn.classList.add('inactive');
                });

                // Add 'active' class and remove 'inactive' from the clicked button
                this.classList.add('active');
                this.classList.remove('inactive');

                // Call the filterAppointments function with the selected filter
                filterAppointments(filter);
            });
        });
    });

    document.addEventListener("DOMContentLoaded", function () {
        // Select all filter buttons for online view
        const selectedFilterOnline = document.getElementById('selectedFilterOnline').value;
        filterAppointmentsOnline(selectedFilterOnline);

        const filterButtonsOnline = document.querySelectorAll('.filter-btn-online');
        const selectedFilterInputOnline = document.getElementById('selectedFilterOnline');
        const filterFormOnline = document.getElementById('filterFormOnline');
        const searchInputOnline = document.getElementById('searchAppointmentsOnline');

        filterAppointmentsOnline(selectedFilterInputOnline.value);

        // Add search functionality for online view
        searchInputOnline.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const currentFilter = selectedFilterInputOnline.value;
            
            // Get the appropriate table based on current filter
            let tableToSearch;
            if (currentFilter === 'allOnline') {
                tableToSearch = document.getElementById('appointmentsTableOnline');
            } else if (currentFilter === 'activeOnline') {
                tableToSearch = document.getElementById('activeAppointmentsTableOnline');
            } else if (currentFilter === 'finishedOnline') {
                tableToSearch = document.getElementById('finishedAppointmentsTableOnline');
            }

            if (tableToSearch) {
                const rows = tableToSearch.getElementsByTagName('tr');
                for (let row of rows) {
                    const text = row.textContent.toLowerCase();
                    if (text.includes(searchTerm)) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                }
            }
        });

        filterButtonsOnline.forEach(button => {
            button.addEventListener('click', function (e) {
                e.preventDefault();

                const filter = this.getAttribute('data-filter-online');

                // Update the hidden input field with the selected filter
                selectedFilterInputOnline.value = filter;

                // Remove 'active' class and add 'inactive' to all buttons
                filterButtonsOnline.forEach(btn => {
                    btn.classList.remove('active');
                    btn.classList.add('inactive');
                });

                // Add 'active' class and remove 'inactive' from the clicked button
                this.classList.add('active');
                this.classList.remove('inactive');

                // Call the filterAppointmentsOnline function with the selected filter
                filterAppointmentsOnline(filter);
            });
        });
    });

    function filterAppointments(filter) {
        // Get references to the elements
        const appointmentsTable = document.getElementById('appointmentsTable');
        const activeAppointmentsTable = document.getElementById('activeAppointmentsTable');
        const finishedAppointmentsTable = document.getElementById('finishedAppointmentsTable');

        if (filter === 'all') {
            appointmentsTable.style.display = 'block';
            activeAppointmentsTable.style.display = 'none';
            finishedAppointmentsTable.style.display = 'none';
        } 
        else if (filter === 'active') {
            appointmentsTable.style.display = 'none';
            activeAppointmentsTable.style.display = 'block';
            finishedAppointmentsTable.style.display = 'none';
        }
        else if (filter === 'finished') {
            appointmentsTable.style.display = 'none';
            activeAppointmentsTable.style.display = 'none';
            finishedAppointmentsTable.style.display = 'block';
        }
    }

    function filterAppointmentsOnline(filter) {
        // Get references to the elements
        const appointmentsTableOnline = document.getElementById('appointmentsTableOnline');
        const activeAppointmentsTableOnline = document.getElementById('activeAppointmentsTableOnline');
        const finishedAppointmentsTableOnline = document.getElementById('finishedAppointmentsTableOnline');
        
        // Get all filter buttons
        const filterButtons = document.querySelectorAll('.filter-btn-online');
        
        // Update button styles
        filterButtons.forEach(button => {
            if (button.getAttribute('data-filter-online') === filter) {
                button.classList.add('active');
                button.classList.remove('inactive');
                button.style.backgroundColor = '#2c2c3c';
            } else {
                button.classList.remove('active');
                button.classList.add('inactive');
                button.style.backgroundColor = '#1c1f2a';
            }
        });

        // Update the hidden input field
        document.getElementById('selectedFilterOnline').value = filter;

        // Show/hide appropriate tables
        if (filter === 'allOnline') {
            appointmentsTableOnline.style.display = 'block';
            activeAppointmentsTableOnline.style.display = 'none';
            finishedAppointmentsTableOnline.style.display = 'none';
        } 
        else if (filter === 'activeOnline') {
            appointmentsTableOnline.style.display = 'none';
            activeAppointmentsTableOnline.style.display = 'block';
            finishedAppointmentsTableOnline.style.display = 'none';
        }
        else if (filter === 'finishedOnline') {
            appointmentsTableOnline.style.display = 'none';
            activeAppointmentsTableOnline.style.display = 'none';
            finishedAppointmentsTableOnline.style.display = 'block';
        }
    }

    function switchToInClinic() {
        // Show InClinic card, hide Online card
        document.getElementById('inClinicCard').style.display = 'block';
        document.getElementById('onlineCard').style.display = 'none';
        
        // Update button styles
        const inClinicBtn = document.getElementById('inClinicBtn');
        const onlineBtn = document.getElementById('onlineBtn');
        
        inClinicBtn.style.backgroundColor = '#2c2c3c';
        inClinicBtn.style.color = '#fff';
        inClinicBtn.style.border = '1px solid #efd959';
        
        onlineBtn.style.backgroundColor = '#1c1f2a';
        onlineBtn.style.color = '#fff';
        onlineBtn.style.border = '1px solid #efd959';
    }

    function switchToOnline() {
        // Show Online card, hide InClinic card
        document.getElementById('onlineCard').style.display = 'block';
        document.getElementById('inClinicCard').style.display = 'none';
        
        // Update button styles
        const inClinicBtn = document.getElementById('inClinicBtn');
        const onlineBtn = document.getElementById('onlineBtn');
        
        onlineBtn.style.backgroundColor = '#2c2c3c';
        onlineBtn.style.color = '#fff';
        onlineBtn.style.border = '1px solid #efd959';
        
        inClinicBtn.style.backgroundColor = '#1c1f2a';
        inClinicBtn.style.color = '#fff';
        inClinicBtn.style.border = '1px solid #efd959';
    }

    // Initialize the view on page load
    document.addEventListener('DOMContentLoaded', function() {
        // Set initial state
        switchToInClinic();
    });

    // Initialize the online view on page load
    document.addEventListener('DOMContentLoaded', function() {
        // Set initial state for online view
        const initialFilter = document.getElementById('selectedFilterOnline').value || 'allOnline';
        filterAppointmentsOnline(initialFilter);
    });
</script>

{% include 'appointments/underground.html' %}
{% endblock %}











